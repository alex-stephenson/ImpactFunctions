% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/update_others.R
\name{update_others}
\alias{update_others}
\title{Update Change Log for Recoding "Other" Responses in a Kobo Survey}
\usage{
update_others(
  survey,
  choices,
  cleaning_log,
  sm_sep = "/",
  other_string = "other"
)
}
\arguments{
\item{survey}{A data frame representing the survey tool. Typically obtained from the "survey" sheet.}

\item{choices}{A data frame representing the answer options. Typically obtained from the "choices" sheet.}

\item{cleaning_log}{A data frame containing the cleaning log(s).}

\item{sm_sep}{Separator used for select multiple questions}

\item{other_string}{the string of your other select multiple binaries questions, normally "Other" or 'other'}
}
\value{
A data frame with the updated change log entries.
}
\description{
This function updates a change log for a Kobo survey by recoding "other" responses.
It takes survey tool metadata (\code{survey} and \code{choices}) and a cleaning log (\code{cleaning_log})
that holds reviewer responses for reclassification. It then adjusts the change log by:
\itemize{
\item Updating the parent (select one/select multiple) question with the free text recoded value.
\item Nullifying the free text question (indicating the "other" response has been processed).
}
}
\details{
The function performs the following steps:
\enumerate{
\item Identify free text questions that capture "other" responses by filtering for questions
which have "other" specified in the \code{relevant} field.
\item Extract the parent question names from the \code{relevant} field (using regex extraction).
\item Filter the survey for select questions and extract the associated \code{list_name} using
a split on the \code{type} column.
\item Validate that the new response provided in the cleaning log (combined with the parent
question) exists in the list of valid choices.
\item For recoding, two separate workflows are applied for select_one and select_multiple questions.
\item The clog is remade in the UUID, question, change_type, new_value format, with the old other text and select_one /
select_mulitple 'turned off' and the reclassified answer 'turned on'.

}
\figure{updated_others.jpg}{options: width=80\%}
}
